(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{247:function(t,e,v){"use strict";v.r(e);var _=v(0),a=Object(_.a)({},(function(){var t=this.$createElement;this._self._c;return this._m(0)}),[function(){var t=this,e=t.$createElement,v=t._self._c||e;return v("div",{staticClass:"content"},[v("h1",{attrs:{id:"环境规划"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#环境规划"}},[t._v("#")]),t._v(" 环境规划")]),t._v(" "),v("h2",{attrs:{id:"概述"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#概述"}},[t._v("#")]),t._v(" 概述")]),t._v(" "),v("p",[t._v("环境规划主要用于服务的选型和服务器的分配，集群数据的规模来进行阐述，\n针对于多个场景进行考虑")]),t._v(" "),v("h2",{attrs:{id:"服务器规划"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#服务器规划"}},[t._v("#")]),t._v(" 服务器规划")]),t._v(" "),v("blockquote",[v("p",[t._v("用于内部开发环境")])]),t._v(" "),v("h3",{attrs:{id:"基础服务器规划"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#基础服务器规划"}},[t._v("#")]),t._v(" 基础服务器规划")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",{staticStyle:{"text-align":"center"}},[t._v("序号")]),t._v(" "),v("th",[t._v("名称")]),t._v(" "),v("th",[t._v("IP")]),t._v(" "),v("th",[t._v("服务器配置")]),t._v(" "),v("th",[t._v("网络配置")]),t._v(" "),v("th",[t._v("备注")])])]),t._v(" "),v("tbody",[v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",[t._v("主节点 data-01")]),t._v(" "),v("td",[t._v("192.168.1.1")]),t._v(" "),v("td",[t._v("CPU8 核，32G 内存；存储 2T")]),t._v(" "),v("td",[t._v("内网上传和下载带宽至少为 1000M；外网传输至少为 5M")]),t._v(" "),v("td")]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("2")]),t._v(" "),v("td",[t._v("副节点 data-02")]),t._v(" "),v("td",[t._v("192.168.1.2")]),t._v(" "),v("td",[t._v("CPU8 核，32G 内存；存储 2T")]),t._v(" "),v("td",[t._v("内网上传和下载带宽至少为 1000M；外网传输至少为 5M")]),t._v(" "),v("td")]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("3")]),t._v(" "),v("td",[t._v("副节点 data-03")]),t._v(" "),v("td",[t._v("192.168.1.3")]),t._v(" "),v("td",[t._v("CPU8 核，32G 内存；存储 2T")]),t._v(" "),v("td",[t._v("内网上传和下载带宽至少为 1000M；外网传输至少为 5M")]),t._v(" "),v("td")]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("4")]),t._v(" "),v("td",[t._v("应用服务器")]),t._v(" "),v("td",[t._v("192.168.1.4")]),t._v(" "),v("td",[t._v("CPU8 核，32G 内存；存储 512G")]),t._v(" "),v("td",[t._v("外网传输至少为 5M")]),t._v(" "),v("td")])])]),t._v(" "),v("h3",{attrs:{id:"服务器部署规划"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#服务器部署规划"}},[t._v("#")]),t._v(" 服务器部署规划")]),t._v(" "),v("blockquote",[v("p",[t._v("以下做为参考，主要考虑多种环境下的搭建参考")])]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",{staticStyle:{"text-align":"center"}},[t._v("序号")]),t._v(" "),v("th",[t._v("服务名称")]),t._v(" "),v("th",[t._v("子服务")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("主节点(01)")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("副节点(02)")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("副节点(03)")]),t._v(" "),v("th",[t._v("备注")])])]),t._v(" "),v("tbody",[v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),v("td",[t._v("HDFS")]),t._v(" "),v("td",[t._v("NameNode")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}}),t._v(" "),v("td",{staticStyle:{"text-align":"center"}}),t._v(" "),v("td")]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("2")]),t._v(" "),v("td"),t._v(" "),v("td",[t._v("DataNode")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),v("td")]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("3")]),t._v(" "),v("td"),t._v(" "),v("td",[t._v("SecondaryNameNode")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}}),t._v(" "),v("td",{staticStyle:{"text-align":"center"}}),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),v("td")]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("4")]),t._v(" "),v("td",[t._v("Yarn")]),t._v(" "),v("td",[t._v("NodeManager")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),v("td")]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("3")]),t._v(" "),v("td"),t._v(" "),v("td",[t._v("Resourcemanager")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}}),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}}),t._v(" "),v("td")]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("5")]),t._v(" "),v("td",[t._v("Zookeeper")]),t._v(" "),v("td",[t._v("Zookeeper Server")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),v("td")]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("6")]),t._v(" "),v("td",[t._v("Flume (采集日志)")]),t._v(" "),v("td",[t._v("Flume")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}}),t._v(" "),v("td")]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("7")]),t._v(" "),v("td",[t._v("Kafka")]),t._v(" "),v("td",[t._v("Kafka")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),v("td")]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("8")]),t._v(" "),v("td",[t._v("Flume（消费 Kafka）")]),t._v(" "),v("td",[t._v("Flume")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}}),t._v(" "),v("td",{staticStyle:{"text-align":"center"}}),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),v("td")]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("9")]),t._v(" "),v("td",[t._v("Hive")]),t._v(" "),v("td",[t._v("Hive")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}}),t._v(" "),v("td",{staticStyle:{"text-align":"center"}}),t._v(" "),v("td")]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("10")]),t._v(" "),v("td",[t._v("MySQL")]),t._v(" "),v("td",[t._v("MySQL")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}}),t._v(" "),v("td",{staticStyle:{"text-align":"center"}}),t._v(" "),v("td")]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("11")]),t._v(" "),v("td",[t._v("Sqoop")]),t._v(" "),v("td",[t._v("Sqoop")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}}),t._v(" "),v("td",{staticStyle:{"text-align":"center"}}),t._v(" "),v("td")]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("12")]),t._v(" "),v("td",[t._v("Presto")]),t._v(" "),v("td",[t._v("Coordinator")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}}),t._v(" "),v("td",{staticStyle:{"text-align":"center"}}),t._v(" "),v("td")]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("13")]),t._v(" "),v("td"),t._v(" "),v("td",[t._v("Worker")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}}),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),v("td")]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("14")]),t._v(" "),v("td",[t._v("Azkaban")]),t._v(" "),v("td",[t._v("AzkabanWebServer")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}}),t._v(" "),v("td",{staticStyle:{"text-align":"center"}}),t._v(" "),v("td")]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("15")]),t._v(" "),v("td"),t._v(" "),v("td",[t._v("AzkabanExecutorServer")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}}),t._v(" "),v("td",{staticStyle:{"text-align":"center"}}),t._v(" "),v("td")]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("16")]),t._v(" "),v("td",[t._v("Druid")]),t._v(" "),v("td",[t._v("Druid")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),v("td")]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("17")]),t._v(" "),v("td",[t._v("Kylin")]),t._v(" "),v("td",[t._v("Kylin")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}}),t._v(" "),v("td",{staticStyle:{"text-align":"center"}}),t._v(" "),v("td")]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("18")]),t._v(" "),v("td",[t._v("Hbase")]),t._v(" "),v("td",[t._v("HMaster")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}}),t._v(" "),v("td",{staticStyle:{"text-align":"center"}}),t._v(" "),v("td")]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("19")]),t._v(" "),v("td"),t._v(" "),v("td",[t._v("HRegionServer")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),v("td")]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("20")]),t._v(" "),v("td",[t._v("Superset")]),t._v(" "),v("td"),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}}),t._v(" "),v("td",{staticStyle:{"text-align":"center"}}),t._v(" "),v("td")]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("21")]),t._v(" "),v("td",[t._v("Atlas")]),t._v(" "),v("td"),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}}),t._v(" "),v("td",{staticStyle:{"text-align":"center"}}),t._v(" "),v("td")]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("22")]),t._v(" "),v("td",[t._v("Solr")]),t._v(" "),v("td",[t._v("jar")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}}),t._v(" "),v("td",{staticStyle:{"text-align":"center"}}),t._v(" "),v("td")]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}}),t._v(" "),v("td"),t._v(" "),v("td"),t._v(" "),v("td",{staticStyle:{"text-align":"center"}}),t._v(" "),v("td",{staticStyle:{"text-align":"center"}}),t._v(" "),v("td",{staticStyle:{"text-align":"center"}}),t._v(" "),v("td")]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("23")]),t._v(" "),v("td",[t._v("服务数总计")]),t._v(" "),v("td"),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("18")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("9")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("9")]),t._v(" "),v("td")])])]),t._v(" "),v("h2",{attrs:{id:"相关问题"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#相关问题"}},[t._v("#")]),t._v(" 相关问题")]),t._v(" "),v("h3",{attrs:{id:"服务器选型考虑"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#服务器选型考虑"}},[t._v("#")]),t._v(" 服务器选型考虑")]),t._v(" "),v("p",[t._v("服务器选择物理机还是云主机")]),t._v(" "),v("h4",{attrs:{id:"物理机"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#物理机"}},[t._v("#")]),t._v(" 物理机")]),t._v(" "),v("ul",[v("li",[t._v("以 128G 内存,20 核物理 CPU,40 线程,8THDD 和 2TSSD 硬盘,戴尔品牌单台报价 4W 出差，一般物理机寿命 5 年左右。")]),t._v(" "),v("li",[t._v("需专业的运维人员，平均 1 个月 1 万，考虑电费开销")])]),t._v(" "),v("h4",{attrs:{id:"云主机"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#云主机"}},[t._v("#")]),t._v(" 云主机")]),t._v(" "),v("ul",[v("li",[t._v("云主机：以阿里云为例，差不多相同配置，每年 5W")]),t._v(" "),v("li",[t._v("运维工作由阿里云完成，运维相对较轻松")])]),t._v(" "),v("h4",{attrs:{id:"企业选择"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#企业选择"}},[t._v("#")]),t._v(" 企业选择")]),t._v(" "),v("ul",[v("li",[t._v("金融公司和阿里没有直接冲突的公司选择阿里云")]),t._v(" "),v("li",[t._v("中小公司/为了融资上市，选择阿里云，拉倒融资后买物理机")]),t._v(" "),v("li",[t._v("有长期打算，资金比较足，选择物理机")])]),t._v(" "),v("h3",{attrs:{id:"集群规模"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#集群规模"}},[t._v("#")]),t._v(" 集群规模")]),t._v(" "),v("p",[t._v("这里假设每台服务器 8T 磁盘，128G 内存，确认集群规模：")]),t._v(" "),v("ul",[v("li",[t._v("每天日活跃用户 100 万，每人一天平均 100 条：100 万*100 条=1 亿条")]),t._v(" "),v("li",[t._v("每条日志 1K 左右，每天 1 亿条：100000000/1024/1024 = 约 100G")]),t._v(" "),v("li",[t._v("5 年内不扩容服务器考虑：100G _ 365 天 _ 5 年 = 约 180T")]),t._v(" "),v("li",[t._v("保存 3 副本：180T*3 = 540T")]),t._v(" "),v("li",[t._v("预保留 20% ~ 30% = 540/0.7 = 770T")]),t._v(" "),v("li",[t._v("服务器规模：8T * 95 台服务器")]),t._v(" "),v("li",[t._v("数据采用压缩算法，压缩到 30%，服务器至少 30 台服务器")])]),t._v(" "),v("p",[t._v("考虑数仓分层计算：")]),t._v(" "),v("ul",[v("li",[t._v("数据仓库分层")]),t._v(" "),v("li",[t._v("数据压缩计算")])]),t._v(" "),v("h2",{attrs:{id:"其它"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#其它"}},[t._v("#")]),t._v(" 其它")]),t._v(" "),v("ul",[v("li",[t._v("略")])])])}],!1,null,null,null);e.default=a.exports}}]);