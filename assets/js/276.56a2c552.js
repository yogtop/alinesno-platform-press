(window.webpackJsonp=window.webpackJsonp||[]).push([[276],{493:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),a("p",[t._v("单机版安装只为用于学习使用，生产中请使用集群模式，此处以阿里云服务器做为示例用于学习,")]),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v(" "),a("p",[t._v("添加 elk 用户")]),t._v(" "),t._m(10),a("p",[t._v("解压 es,并启动，一般无非端口或者内存的原因，这步一般情况下是很顺利的")]),t._v(" "),t._m(11),a("p",[t._v("解压 logstash")]),t._v(" "),t._m(12),t._m(13),t._v(" "),t._m(14),a("p",[t._v("配置内容如下，这里启动了一个 tcp 服务，端口是 4567，然后向本地的 es 输入")]),t._v(" "),t._m(15),a("p",[t._v("启动 logstash")]),t._v(" "),t._m(16),a("p",[t._v("安装 kibana 客户端")]),t._v(" "),t._m(17),t._m(18),t._v(" "),a("img",{attrs:{src:t.$withBase("/operation/kibana_01.png")}})])}),[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"elk-单机版本安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#elk-单机版本安装"}},[this._v("#")]),this._v(" ELK 单机版本安装")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"本内容你将获得"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#本内容你将获得"}},[this._v("#")]),this._v(" 本内容你将获得")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("ELK 单机版本安装")]),this._v(" "),s("li",[this._v("启动并配置 logstash 配置(此处只为 demo)")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"elk-安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#elk-安装"}},[this._v("#")]),this._v(" elk 安装")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#说明"}},[this._v("#")]),this._v(" 说明")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"上传软件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#上传软件"}},[this._v("#")]),this._v(" 上传软件")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("上传 Jenkins 至 Linux 服务器"),s("code",[this._v("/home/alinesno/elk")]),this._v("目录")])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("此处用户可以使用 xftp 或者 xshell 等工具，书要简言")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[this._v("#")]),this._v(" 安装")])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("elk 启动需要使用非 root 用户操作，所以此处添加 elk 用户，并用此用户操作，生产也强烈建议以非 root 操作")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useradd")]),t._v(" elk\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 如果需要设置密码则做如此操作")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("passwd")]),t._v(" elk\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("su")]),t._v(" elk\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("tar")]),t._v(" -zxvf elasticsearch-6.5.1.tar.gz\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 重命名文件夹")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mv")]),t._v(" elasticsearch-6.5.1  elasticsearch\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" elasticsearch\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# -d 表示后面运行")]),t._v("\n./bin/elasticsearch -d\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看启动日志")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("tail")]),t._v(" -f logs/elasticsearch.log\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看进程是否存在")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ps")]),t._v(" -ef"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" elasticsearch\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("tar")]),t._v(" -zxvf logstash-6.5.1.tar.gz\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mv")]),t._v(" logstash-6.5.1 logstash\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" logstash\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看示例配置")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" config/logstash-sample.conf\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("此处为与 alinesno-cloud 平台整合，所以添加以下配置,编辑文件名称为"),s("code",[this._v("logstash.conf")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[this._v("vim")]),this._v(" config/logstash.conf\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[t._v("input"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    tcp "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        mode => "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"server"')]),t._v("\n        host => "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0.0.0.0"')]),t._v("\n        port => "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4567")]),t._v("\n        codec => json_lines\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\noutput"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    elasticsearch "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        hosts=>"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"127.0.0.1:9200"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        index => "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"alinesno-cloud-%{+YYYY.MM.dd}"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    stdout"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        codec => rubydebug\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[this._v("cd")]),this._v(" logstash\n"),s("span",{pre:!0,attrs:{class:"token function"}},[this._v("nohup")]),this._v(" ./bin/logstash -f ./config/logstash\n"),s("span",{pre:!0,attrs:{class:"token function"}},[this._v("tail")]),this._v(" -f nohup.out\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("tar")]),t._v(" -zxvf kibana-6.5.1-linux-x86_64.tar.gz\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mv")]),t._v(" kibana-6.5.1-linux-x86_64 kibana\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("nohup")]),t._v(" bin/kibana "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("访问"),s("code",[this._v("http://localhost:5601")]),this._v("，见如下界面:")])}],!1,null,null,null);s.default=e.exports}}]);